import{c as w,u as h,o as v,j as f}from"./index-Bpll8QAE.js";import{u as c}from"./units-CKh7G0uS.js";import{b as S}from"./openWeather-CsIbjIca.js";import{F}from"./ForecastSection-DL12zFm9.js";/* empty css              */import"./ArrowRightIcon-ssCBG7ju.js";function x(){const l=w(),m=h(),u=c([]),i=c(""),n=c(!0);async function D(){const o=l.value.query.city;if(!o){await m.push("/");return}i.value=o,n.value=!0;const e=await S(o);if(e?.list){const t={};e.list.forEach(s=>{const a=new Date(s.dt*1e3).toDateString();t[a]||(t[a]=[]),t[a].push(s)});const r=Object.keys(t).map(s=>t[s].reduce((a,d)=>{const y=new Date(a.dt*1e3).getHours(),p=new Date(d.dt*1e3).getHours();return Math.abs(p-12)<Math.abs(y-12)?d:a}));u.value=r.slice(0,7)}n.value=!1}v(()=>{D()});const g=o=>{const e=new Date(o*1e3),t=new Date,r=new Date(t);return r.setDate(r.getDate()+1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===r.toDateString()?"Tomorrow":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return n.value?f("div",{className:"forecast-loading",children:"Loading..."}):f(F,{forecastData:u.value,city:i.value,formatLabel:g})}export{x as default};
